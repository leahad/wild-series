{% extends 'base.html.twig' %}

{% block title %} {{ episode.title }}{% endblock %}

{% block body %}
<div class="media">
    <img class="align-self-start mr-3" src="{{ program.poster }}" alt="{{ program.title }} poster">
    <div class="media-body">
        <h1 class="mt-0"> {{ program.title }} </h1>
        <h2>season : {{ season.number }} </h2>
        <h3>{{ episode.number }} / {{ episode.title }} </h3>
        <p>{{ episode.synopsis }} </p>
    </div>
</div>

{% if app.user %}
<div class="media mt-4">
{{ include('program/_form.html.twig') }}
</div>
{% endif %}


<div class="media mt-4">
    <strong>Comments :</strong>
        {% for comment in episode.comments %}
            <div class="card mt-4" style="width: 35rem;">
                <div class="card-body">
                    <p> rate : {{ comment.rate }}</p> 
                    <p> comment : {{ comment.comment }}</p> 
                    <small> author : {{ comment.author.email }}</small> 
                        {% if app.user %}   
                            {% if app.user.email == comment.author.email or app.user.email == 'admin@monsite.com' %}         
                                <a href="{{ path("comment_edit", {comment:comment.id }) }}">edit</a>
                            {% endif %}
                        {% endif %}
                </div>
            </div>
        {% else %}
            <li>no comment for this episode</li>
        {% endfor %}
        </ul>
</div>

    <a class="" href="{{ path('program_index') }}">
        Back to the programs list
    </a>
{% endblock %}